pr:
- main


trigger:
- master

pool:
  vmImage: ubuntu-latest


steps:

  - checkout: self

  - task: GoTool@0
    inputs:
      version: '1.19.6'
    displayName: "Select Go Version"
    
  - task: Go@0
    inputs:
      command: 'get'
      arguments: '-d ./...'
      workingDirectory: './'
    displayName: "Get Dependencies"

  - script: |
      ./installTrivy.sh
    displayName: 'Install Trivy'

  - script: |
        ./TrivyScan.sh
    displayName: 'Run Trivy'

